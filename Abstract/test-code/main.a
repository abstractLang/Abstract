
@public func main() void {

	# Testing object instantiation
	let Randomizer rng = new Randomizer()
	# Testing direct assignment
	rng.seed = 0x123456789ABCDEF0
	rng.rng.last = 0

	# Testing function call
	writeln(rng.seed)
	writeln(rng.rng.last)

	# Testing function with ignored
	# return value
	mathTest(5, rng)

	# Testing structure field modification
	writeln(rng.rng.last)

	# Testing function with return value
	#let u64 result = mathTest(10, rng)
}

func mathTest(u8 entropy, Randomizer rng) u64 {
	# Testing assignment operations
	let u32 value *= rng.seed * entropy

	# Testing operations with constants
	value = 5 * 10
	value = 10 / 2
	value = 34565432 % 100 + 5

	# Testing operations with fields
	rng.rng.last += value
	value += rng.seed

	return value
}

struct Randomizer {

	@public let u64 seed
	@public let StructNeastingTest rng

}
struct StructNeastingTest {

	@public let u64 last
	@public let u128 entropy

}

struct StructPackingTest {

	@public let u8 a
	@public let u128 b
	@public let u8 c
	@public let u64 d
	@public let u16 e
	@public let u32 f
	@public let u8 g
	@public let u16 h	
	@public let u32 i

}

# For now, write and writeln will be
# just imported from a external source

@extern("write_u64")   func write(u64 value) void
@extern("writeln_u64") func writeln(u64 value) void