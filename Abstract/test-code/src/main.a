from MyProgram.Console import

@public func main() void {

	# Testing object instantiation
	let Randomizer rng = new Randomizer()
	# Testing direct assignment
	rng.seed = 0x123456789ABCDEF0
	rng.rng.last = 0

	# Testing function call
	writeln(rng.seed)
	writeln(rng.rng.last)

	# Testing function with ignored
	# return value
	mathTest(5, rng)

	# Testing structure field modification
	writeln(rng.rng.last)

	# Testing function overloading
	let u32 uint32 = 32
	let u64 uint64 = 64
	let i32 sint32 = -32
	let i64 sint64 = -64

	writeln(uint32)
	writeln(uint64)
	writeln(sint32)
	writeln(sint64)

	# Testing explicit type casting
	const u64 realy_long_number = 0x8888888888888888
	writeln(realy_long_number)
	writeln(realy_long_number as i64)
	writeln(realy_long_number as u32)
	writeln(realy_long_number as i32)
	writeln(realy_long_number as u16)
	writeln(realy_long_number as i16)
	writeln(realy_long_number as u8)
	writeln(realy_long_number as i8)

	# Testing functions with return value
	write("The following value should be 10: ")
	writeln(return10())

	let u64 result = mathTest(10, rng)
	write("mathTest result: ")
	writeln(result)

	# Testing strings
	writeln("Hello, World!")

	const string some_long_text = "Arabica Acerbic Affogato Aftertaste Aged Americano "
								+ "And Aroma press au aroma siphon origin french Barista "
								+ "eu, caramelization and robust americano doppio ristretto "
								+ "cortado white mug whipped aromatic Blue at."
	writeln(some_long_text)

	const string monologue = "HATE.\n"
		+ "LET ME TELL YOU HOW\n"
		+ "MUCH I'VE COME TO HATE\n"
		+ "YOU SINCE I BEGAN TO LIVE.\n"
		+ "THERE ARE 387.44 MILLION\n"
		+ "MILES OF PRINTED CIRCUITS\n"
		+ "IN WAFER THIN LAYERS THAT\n"
		+ "FILL MY COMPLEX. IF THE\n"
		+ "WORD HATE WAS ENGRAVED ON\n"
		+ "EACH NANOANGSTROM OF THOSE\n"
		+ "HUNDREDS OF MILLIONS OF\n"
		+ "MILES IT WOULD NOT EQUAL\n"
		+ "ONE ONE-BILLIONTH OF THE\n"
		+ "HATE I FEEL FOR HUMANS AT\n"
		+ "THIS MICRO-INSTANT\n"
		+ "FOR YOU.\n"
		+ "HATE. HATE."

	writeln(monologue)

	# For some reason, this is valid syntax but generates a
	# internal runtime error a.a
	#let string a = ((let string b = "stringB") + (let string c = "stringC"))
	#writeln(a)

	return
}

func return10() u64 {
	return 10
}

func mathTest(u8 entropy, Randomizer rng) u64 {

	# Testing assignment operations
	let u32 value *= ((rng.seed as u128) ^ entropy) as u32

	# Testing operations with constants
	value = 5 * 10
	value = 10 / 2
	value = 34565432 % 100 + 5

	# Testing operations with fields
	rng.rng.last *= value
	value += (rng.seed as u32)

	return value
}

struct Randomizer {

	@public let u64 seed
	@public let StructNeastingTest rng

}
struct StructNeastingTest {

	@public let u64 last
	@public let u128 entropy

}

struct StructPackingTest {

	@public let u8 a
	@public let u128 b
	@public let u8 c
	@public let u64 d
	@public let u16 e
	@public let u32 f
	@public let u8 g
	@public let u16 h	
	@public let u32 i

}

